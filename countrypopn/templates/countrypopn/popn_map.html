{% load leaflet_tags %}
<html>
<head>
{% leaflet_css %}
{% leaflet_js %}
<style>
 .leaflet-container { height: 80%; }
</style>
</head>
<body>
<div>
    <h2><center>Population Density map of Nepal (people per sq. KM)</center></h2>
    {% leaflet_map "main" callback="map_init" %}
</div>
</body>
<script>
    function getColor(d) {
    return d > 1000 ? '#800026' :
           d > 500  ? '#BD0026' :
           d > 200  ? '#E31A1C' :
           d > 100  ? '#FC4E2A' :
           d > 50   ? '#FD8D3C' :
           d > 20   ? '#FEB24C' :
           d > 10   ? '#FED976' :
                      '#FFEDA0';
    }
    function style(feature) {
    return {
        fillColor: getColor((feature.properties.pop_total/feature.properties.area_sq_km)),
        weight: 2,
        opacity: 1,
        color: 'white',
        dashArray: '3',
        fillOpacity: 0.7
    };
}


function map_init(map, options) {
        // get point lat and lon
        // zoom to point & add it to map
        var obj = JSON.parse("{{ my_geo_json | escapejs }}");
        map.setView([28.200769, 85.300140], 7);
        L.geoJson(obj, {style: style}).addTo(map);
    }
</script>
</html>